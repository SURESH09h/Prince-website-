<!DOCTYPE html>
<html>
<head>
  <title>Real Car Game</title>
  <style>
    body {
      margin: 0;
      overflow: hidden;
      background: #222;
    }

    #gameArea {
      width: 400px;
      height: 100vh;
      background: #444;
      margin: auto;
      position: relative;
      overflow: hidden;
      border-left: 5px solid white;
      border-right: 5px solid white;
    }

    .roadLine {
      width: 10px;
      height: 100px;
      background: white;
      position: absolute;
      left: 195px;
    }

    #car {
      width: 50px;
      height: 100px;
      background: red;
      position: absolute;
      bottom: 20px;
      left: 175px;
      border-radius: 10px;
    }

    .enemy {
      width: 50px;
      height: 100px;
      background: yellow;
      position: absolute;
      border-radius: 10px;
    }

    #score {
      position: absolute;
      top: 10px;
      left: 10px;
      color: white;
      font-size: 20px;
    }
  </style>
</head>

<body>

<div id="gameArea">
  <div id="score">Score: 0</div>
  <div id="car"></div>
</div>

<script>
  const gameArea = document.getElementById("gameArea");
  const car = document.getElementById("car");
  const scoreDisplay = document.getElementById("score");

  let score = 0;
  let speed = 5;
  let keys = {};
  let enemies = [];

  document.addEventListener("keydown", e => keys[e.key] = true);
  document.addEventListener("keyup", e => keys[e.key] = false);

  function moveCar() {
    let left = car.offsetLeft;

    if (keys["ArrowLeft"] && left > 0) {
      car.style.left = left - 5 + "px";
    }

    if (keys["ArrowRight"] && left < 350) {
      car.style.left = left + 5 + "px";
    }
  }

  function createEnemy() {
    const enemy = document.createElement("div");
    enemy.classList.add("enemy");
    enemy.style.top = "-100px";
    enemy.style.left = Math.floor(Math.random() * 350) + "px";
    gameArea.appendChild(enemy);
    enemies.push(enemy);
  }

  function moveEnemies() {
    enemies.forEach((enemy, index) => {
      enemy.style.top = enemy.offsetTop + speed + "px";

      if (enemy.offsetTop > 700) {
        enemy.remove();
        enemies.splice(index, 1);
        score++;
        scoreDisplay.innerText = "Score: " + score;
      }

      // Collision
      if (
        car.offsetLeft < enemy.offsetLeft + 50 &&
        car.offsetLeft + 50 > enemy.offsetLeft &&
        car.offsetTop < enemy.offsetTop + 100 &&
        car.offsetTop + 100 > enemy.offsetTop
      ) {
        alert("Game Over! Final Score: " + score);
        location.reload();
      }
    });
  }

  function gameLoop() {
    moveCar();
    moveEnemies();
    requestAnimationFrame(gameLoop);
  }

  setInterval(createEnemy, 1500);
  gameLoop();
</script>

</body>
</html>
