<!DOCTYPE html>
<html>
<head>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Runner Game</title>
<style>
body{
  margin:0;
  overflow:hidden;
  background:linear-gradient(#87CEEB,#ffffff);
}

canvas{
  display:block;
  margin:auto;
  background:#87CEEB;
}
</style>
</head>
<body>

<canvas id="game"></canvas>

<script>
const canvas = document.getElementById("game");
const ctx = canvas.getContext("2d");

canvas.width = window.innerWidth;
canvas.height = window.innerHeight;

let player = {
  x:100,
  y:canvas.height/2,
  radius:20,
  velocity:0,
  gravity:0.6,
  lift:-12
};

let obstacles = [];
let score = 0;
let frame = 0;
let gameOver = false;

function drawPlayer(){
  ctx.beginPath();
  ctx.arc(player.x, player.y, player.radius, 0, Math.PI*2);
  ctx.fillStyle = "orange";
  ctx.fill();
}

function updatePlayer(){
  player.velocity += player.gravity;
  player.y += player.velocity;

  if(player.y + player.radius > canvas.height){
    gameOver = true;
  }
}

function createObstacle(){
  let gap = 200;
  let topHeight = Math.random() * (canvas.height - gap - 100);

  obstacles.push({
    x:canvas.width,
    width:60,
    top:topHeight,
    bottom:canvas.height - topHeight - gap
  });
}

function drawObstacles(){
  ctx.fillStyle = "green";
  obstacles.forEach(obs=>{
    ctx.fillRect(obs.x,0,obs.width,obs.top);
    ctx.fillRect(obs.x,canvas.height-obs.bottom,obs.width,obs.bottom);
  });
}

function updateObstacles(){
  obstacles.forEach(obs=>{
    obs.x -= 5;

    if(player.x + player.radius > obs.x &&
       player.x - player.radius < obs.x + obs.width &&
       (player.y - player.radius < obs.top ||
        player.y + player.radius > canvas.height - obs.bottom)){
          gameOver = true;
       }

    if(obs.x + obs.width < 0){
      score++;
    }
  });

  obstacles = obstacles.filter(obs=>obs.x + obs.width > 0);
}

function drawScore(){
  ctx.fillStyle="black";
  ctx.font="30px Arial";
  ctx.fillText("Score: "+score,20,50);
}

function loop(){
  if(gameOver){
    ctx.fillStyle="red";
    ctx.font="50px Arial";
    ctx.fillText("Game Over",canvas.width/2-120,canvas.height/2);
    return;
  }

  ctx.clearRect(0,0,canvas.width,canvas.height);

  if(frame % 100 === 0){
    createObstacle();
  }

  updatePlayer();
  updateObstacles();
  drawPlayer();
  drawObstacles();
  drawScore();

  frame++;
  requestAnimationFrame(loop);
}

window.addEventListener("click",()=>{
  player.velocity = player.lift;
});

loop();
</script>

</body>
</html>
